<Page
    x:Class="ModernIPTVPlayer.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Padding="30">
        <StackPanel Spacing="20" MaxWidth="600" HorizontalAlignment="Left">
            <TextBlock Text="Ayarlar" FontSize="32" FontWeight="Bold" Margin="0,0,0,10"/>

            <!-- CACHE SETTINGS GROUP -->
            <StackPanel Spacing="10" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" Padding="20" CornerRadius="8" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <FontIcon Glyph="&#xE7F3;" FontSize="20"/>
                    <TextBlock Text="Önbellek &amp; Veri Yönetimi" FontSize="20" FontWeight="SemiBold"/>
                </StackPanel>
                <Border Height="1" Background="{ThemeResource CardStrokeColorDefaultBrush}" Margin="0,5,0,5"/>

                <!-- Auto Update Toggle -->
                <ToggleSwitch x:Name="AutoCacheToggle" Header="Otomatik Arka Plan Güncellemesi" 
                              OnContent="Açık" OffContent="Kapalı" 
                              IsOn="{x:Bind ViewModel.IsAutoCacheEnabled, Mode=TwoWay}"
                              Toggled="AutoCacheToggle_Toggled"/>
                
                <TextBlock Text="Bu özellik açıksa, uygulama her 15 dakikada bir verilerinizi kontrol eder ve gerekirse arka planda günceller."
                           Foreground="{ThemeResource TextFillColorSecondaryBrush}" FontSize="12" TextWrapping="Wrap"/>

                <!-- Update Interval -->
                <ComboBox x:Name="IntervalCombo" Header="Güncelleme Kontrol Sıklığı" Width="200" SelectionChanged="IntervalCombo_SelectionChanged">
                    <ComboBoxItem Content="15 Dakika (Test)" Tag="15"/>
                    <ComboBoxItem Content="1 Saat" Tag="60"/>
                    <ComboBoxItem Content="6 Saat" Tag="360"/>
                    <ComboBoxItem Content="12 Saat" Tag="720"/>
                    <ComboBoxItem Content="24 Saat (Önerilen)" Tag="1440"/>
                </ComboBox>

                <!-- Actions -->
                <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                    <Button x:Name="BtnClearCache" Click="BtnClearCache_Click">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE74D;"/>
                                <TextBlock Text="Önbelleği Temizle"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                    
                    <Button x:Name="BtnRefreshNow" Style="{StaticResource AccentButtonStyle}" Click="BtnRefreshNow_Click">
                         <Button.Content>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE72C;"/>
                                <TextBlock Text="Şimdi Güncelle"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                </StackPanel>

                <TextBlock x:Name="TxtStatus" Text="Hazır" Margin="0,10,0,0" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>

            <!-- PROBE CACHE GROUP -->
            <StackPanel Spacing="10" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" Padding="20" CornerRadius="8" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1">
                 <StackPanel Orientation="Horizontal" Spacing="10">
                    <FontIcon Glyph="&#xE9D9;" FontSize="20"/>
                    <TextBlock Text="Akış Analiz Verileri (Probe)" FontSize="20" FontWeight="SemiBold"/>
                </StackPanel>
                <Border Height="1" Background="{ThemeResource CardStrokeColorDefaultBrush}" Margin="0,5,0,5"/>
                
                <TextBlock Text="Yayınların çözünürlük ve codec bilgileri daha hızlı açılış için cihazınızda saklanır."
                           Foreground="{ThemeResource TextFillColorSecondaryBrush}" FontSize="12" TextWrapping="Wrap"/>
                
                 <Button Content="Analiz Verilerini Temizle" Click="BtnClearProbe_Click"/>
            </StackPanel>
        </StackPanel>

        <!-- Notification Area (for visual feedback) -->
        <InfoBar x:Name="StatusInfoBar" VerticalAlignment="Bottom" Margin="0,0,0,20" IsOpen="False"/>
    </Grid>
</Page>
