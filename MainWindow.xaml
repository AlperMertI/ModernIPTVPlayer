<Window
    x:Class="ModernIPTVPlayer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ModernIPTVPlayer" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="#FF000000">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border x:Name="AppTitleBar"
                Height="32"
                IsHitTestVisible="True"
                VerticalAlignment="Top"
                Background="Transparent"
                Canvas.ZIndex="1" />

        <NavigationView x:Name="NavView"
                        Grid.Row="1"
                        PaneDisplayMode="Left"
                        IsPaneOpen="False"
                        OpenPaneLength="180"
                        IsBackButtonVisible="Collapsed"
                        IsBackEnabled="False"
                        IsSettingsVisible="True"
                        AlwaysShowHeader="False"
                        ItemInvoked="NavView_ItemInvoked"
                        BackRequested="NavView_BackRequested">
            <NavigationView.MenuItems>
                <NavigationViewItem Content="Playlistlerim" Tag="LoginPage">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE77B;"/> <!-- User/Account -->
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItemSeparator/>

                <NavigationViewItem Content="Canlı TV" Tag="LiveTVPage">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7F4;"/> <!-- TV Monitor -->
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Filmler" Tag="MoviesPage">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE8B2;"/> <!-- Movies -->
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Diziler" Tag="SeriesPage">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE8F1;"/> <!-- Library -->
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItemSeparator/>

                <NavigationViewItem Content="Çoklu Ekran" Tag="MultiPlayerPage">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE740;"/> <!-- Window/Grid View (Using Resize icon for now or Tiles) -->
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <Grid>
                <Frame x:Name="ContentFrame" Margin="0,0,0,0" Navigated="ContentFrame_Navigated">
                    <Frame.ContentTransitions>
                        <TransitionCollection>
                            <NavigationThemeTransition/>
                        </TransitionCollection>
                    </Frame.ContentTransitions>
                </Frame>



                <!-- Global Downloads Popup Panel -->
                <Border x:Name="GlobalDownloadPopup" 
                        Canvas.ZIndex="1000" 
                        Width="340"
                        MaxHeight="450"
                        HorizontalAlignment="Right" 
                        VerticalAlignment="Top" 
                        Margin="0,96,24,0" 
                        Visibility="Collapsed"
                        Background="#F0141414"
                        BorderBrush="#33FFFFFF"
                        BorderThickness="1"
                        CornerRadius="12">
                    <Border.Transitions>
                        <TransitionCollection>
                            <PopupThemeTransition FromHorizontalOffset="0" FromVerticalOffset="-20"/>
                        </TransitionCollection>
                    </Border.Transitions>
                    
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/> <!-- Header -->
                            <RowDefinition Height="*"/>    <!-- Content -->
                        </Grid.RowDefinitions>
                        
                        <Grid Padding="16,12" BorderBrush="#1FFFFFFF" BorderThickness="0,0,0,1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="İndirmeler" FontSize="15" FontWeight="SemiBold" Foreground="White" VerticalAlignment="Center"/>
                            
                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="2">
                                <!-- Pause/Resume All -->
                                <Button x:Name="PauseResumeAllButton" Click="TogglePauseResume_Click" Width="32" Height="32" Padding="0" Background="Transparent" BorderThickness="0" ToolTipService.ToolTip="Hepsini Duraklat">
                                     <FontIcon x:Name="PauseResumeIcon" Glyph="&#xE769;" FontSize="13" Foreground="#CCFFFFFF"/> 
                                </Button>
                                <!-- Cancel All -->
                                <Button Click="CancelAll_Click" Width="32" Height="32" Padding="0" Background="Transparent" BorderThickness="0" ToolTipService.ToolTip="Hepsini İptal Et">
                                     <FontIcon Glyph="&#xE74D;" FontSize="13" Foreground="#CCFFFFFF"/> 
                                </Button>
                                <!-- Spacer -->
                                <Rectangle Width="1" Height="16" Fill="#22FFFFFF" Margin="4,0"/>
                                
                                <!-- Close -->
                                <Button x:Name="ClosePopupButton" 
                                        Click="ClosePopup_Click"
                                        Background="Transparent" 
                                        BorderThickness="0"
                                        Width="32" Height="32"
                                        Padding="0"
                                        ToolTipService.ToolTip="Kapat">
                                    <FontIcon Glyph="&#xE711;" FontSize="13" Foreground="#99FFFFFF"/>
                                </Button>
                            </StackPanel>
                        </Grid>
                        
                        <!-- Download Cards Container -->
                        <ScrollViewer Grid.Row="1" 
                                      VerticalScrollBarVisibility="Auto"
                                      HorizontalScrollBarVisibility="Disabled"
                                      Padding="12">
                            <StackPanel x:Name="GlobalNotificationPanel" Spacing="10"/>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>


        </NavigationView>
    </Grid>
</Window>