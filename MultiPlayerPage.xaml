<Page
    x:Class="ModernIPTVPlayer.MultiPlayerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ModernIPTVPlayer"
    xmlns:controls="using:ModernIPTVPlayer.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Black">

    <Grid Background="Black" x:Name="RootGrid">
        
        <!-- PLAY AREA (Full Screen) -->
        <Canvas x:Name="PlayerCanvas" Background="Black">
             <!-- Layout Feedback Preview (Glassy Premium Look) -->
             <Rectangle x:Name="LayoutPreview" Stroke="#AA00B7FF" StrokeThickness="2" Visibility="Collapsed" Canvas.ZIndex="800" IsHitTestVisible="False">
                 <Rectangle.Fill>
                     <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                         <GradientStop Color="#4400B7FF" Offset="0.0"/>
                         <GradientStop Color="#1100B7FF" Offset="1.0"/>
                     </LinearGradientBrush>
                 </Rectangle.Fill>
             </Rectangle>
        </Canvas>

        <!-- TOP CONTROL AREA (Trigger + Header) - No fixed height to prevent clipping -->
        <Grid VerticalAlignment="Top" Width="500" HorizontalAlignment="Center" Background="Transparent" Canvas.ZIndex="10000"
              PointerEntered="Header_PointerEntered" PointerExited="Header_PointerExited">
            
            <!-- FLOATING HEADER (Auto-Hide) -->
            <Grid x:Name="FloatingHeader" Height="50" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,5,0,0"
                  Opacity="0" IsHitTestVisible="False">
                
                <Grid.Transitions>
                    <TransitionCollection>
                        <EntranceThemeTransition FromVerticalOffset="-50"/>
                    </TransitionCollection>
                </Grid.Transitions>

                <Border Background="#CC202020" CornerRadius="30" BorderBrush="#444" BorderThickness="1" Padding="20,0">
                    <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                        <TextBlock Text="Çoklu Ekran" VerticalAlignment="Center" FontWeight="Bold" Foreground="White" Margin="0,0,10,0"/>

                        <Button x:Name="AddChannelBtn" Style="{StaticResource AccentButtonStyle}" CornerRadius="20" Click="AddChannelBtn_Click">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE710;" FontSize="14"/>
                                <TextBlock Text="Kanal Ekle"/>
                            </StackPanel>
                        </Button>
                        
                        <Button x:Name="ResetLayoutBtn" Style="{StaticResource DefaultButtonStyle}" CornerRadius="20" Click="ResetLayoutBtn_Click" ToolTipService.ToolTip="Düzeni Sıfırla">
                            <FontIcon Glyph="&#xE895;" FontSize="14"/>
                        </Button>

                        <Button x:Name="FullscreenViewBtn" Style="{StaticResource DefaultButtonStyle}" CornerRadius="20" Click="FullscreenViewBtn_Click" ToolTipService.ToolTip="Tam Ekran">
                            <FontIcon x:Name="FullscreenViewIcon" Glyph="&#xE740;" FontSize="14"/>
                        </Button>
                        
                        <Button x:Name="CloseMultiViewBtn" Style="{StaticResource DefaultButtonStyle}" CornerRadius="20" Click="CloseMultiViewBtn_Click" ToolTipService.ToolTip="Çıkış" Background="#C42B1C" Foreground="White">
                             <FontIcon Glyph="&#xE711;" FontSize="14"/>
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>

        <!-- No Channels Message -->
        <StackPanel x:Name="EmptyMessage" VerticalAlignment="Center" HorizontalAlignment="Center" IsHitTestVisible="False" Spacing="20" Visibility="Collapsed">
            <FontIcon Glyph="&#xE710;" FontSize="48" Foreground="#444" />
            <TextBlock Text="Kanal eklemek için fareyi yukarı taşıyın." Foreground="#666" FontSize="18"/>
        </StackPanel>
    </Grid>
</Page>
